<!DOCTYPE html>
<html>
  <head>
    <title>State Management in Vanilla JS</title>
  </head>

  <body>
    <div id='app'></div>

    <script>
      const App = function App() {
        return `
          <h1>Hello Vanilla JS!</h1>
          <div>
            Example of state management in Vanilla JS
          </div>
          <br />
          <h1>${_App.state.count}</h1>
          <button id="button">Increase</button>
        `;
      };

      App.state = {
        count: 0,
        increment: () => {
          setState(() => App.state.count--);
        }
      };

      const setState = (callback) => {
        callback();
        updateTree();
      }

      const updateTree = () => {
        document.getElementById('app').innerHTML = App();
        document
          .getElementById('button')
          .addEventListener('click', App.state.increment);
      };

      updateTree();
    </script>
  </body>
</html>
